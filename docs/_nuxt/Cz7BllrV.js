import{l as B,r as b,f as C,C as F,o as l,c as r,a as s,g as o,t as w,d as m,z as p,b as S,P as j}from"./Bbm1RNck.js";import{u as E}from"./CGfMHTA9.js";import{u as V}from"./BywgJNjL.js";const N={class:"min-h-screen bg-base-200 p-4"},P={class:"max-w-md mx-auto"},A={class:"card bg-base-100 shadow-xl"},$={class:"card-body items-center text-center bg-primary text-primary-content rounded-t-2xl"},L={class:"avatar mb-4"},D={class:"w-24 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2"},T=["src"],H={key:1,class:"w-full h-full flex items-center justify-center bg-primary-focus text-3xl font-bold"},O={class:"card-title text-2xl"},R={key:0,class:"mt-4"},Y=["disabled"],q={key:0,class:"loading loading-spinner loading-xs mr-2"},G={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J={key:1,class:"btn btn-sm btn-outline btn-secondary",disabled:""},K={class:"card-body"},Q={class:"w-full"},W={class:"grid grid-cols-1 gap-4"},X={class:"form-control"},Z=["value"],ss={class:"form-control"},es=["value"],ts={key:0,class:"form-control"},os=["value"],ls={class:"card-actions justify-between mt-6"},rs={key:0,class:"btn btn-outline btn-primary"},as={key:1,class:"btn btn-primary"},ns={__name:"Profile",props:{userId:{type:String,default:null}},setup(_){const a=B(),v=E(),d=_,t=b(null),i=b(!1),c=b(!1),I=C(()=>i.value?a.isFollowing(d.userId):!1);F(async()=>{var n;if(console.log("User profile component mounted"),!d.userId){t.value=a.authUser,i.value=!1;return}if(d.userId!==((n=a.authUser)==null?void 0:n.id)){i.value=!0;try{const e=await V();t.value=await e.getById(d.userId)}catch(e){console.error("Error fetching user profile:",e)}}else t.value=a.authUser,i.value=!1;console.log("followess",a.getFollowees)});function M(){var n;return(n=t.value)!=null&&n.name?t.value.name.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"?"}async function z(){var n,e;if(!(!((n=t.value)!=null&&n.id)||!((e=a.authUser)!=null&&e.id))){c.value=!0;try{(await(await V()).followUser(a.authUser.id,t.value.id)).status==="success"&&v.success(`You are now following ${t.value.name}`)}catch(u){console.error("Error following user:",u),v.error("Failed to follow user. Please try again.")}finally{c.value=!1}}}return(n,e)=>{var u,f,g,h,y,x,k,U;return l(),r("div",N,[s("div",P,[s("div",A,[s("div",$,[s("div",L,[s("div",D,[(u=o(t))!=null&&u.avatar?(l(),r("img",{key:0,src:(f=o(t))==null?void 0:f.avatar,alt:"User avatar"},null,8,T)):(l(),r("div",H,w(M()),1))])]),s("h2",O,w(((g=o(t))==null?void 0:g.name)||"User"),1),s("p",null,w((h=o(t))==null?void 0:h.email),1),o(i)?(l(),r("div",R,[o(I)?(l(),r("button",J,e[2]||(e[2]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),m(" Following ")]))):(l(),r("button",{key:0,onClick:z,class:"btn btn-sm btn-secondary",disabled:o(c)},[o(c)?(l(),r("span",q)):(l(),r("svg",G,e[0]||(e[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"},null,-1)]))),e[1]||(e[1]=m(" Follow "))],8,Y))])):p("",!0)]),s("div",K,[s("div",Q,[e[6]||(e[6]=s("div",{class:"divider"},"User Information",-1)),s("div",W,[s("div",X,[e[3]||(e[3]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Name")],-1)),s("input",{type:"text",value:(y=o(t))==null?void 0:y.name,class:"input input-bordered input-sm",disabled:""},null,8,Z)]),s("div",ss,[e[4]||(e[4]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Email")],-1)),s("input",{type:"text",value:(x=o(t))==null?void 0:x.email,class:"input input-bordered input-sm",disabled:""},null,8,es)]),(k=o(t))!=null&&k.details?(l(),r("div",ts,[e[5]||(e[5]=s("label",{class:"label"},[s("span",{class:"label-text font-semibold"},"Details")],-1)),s("textarea",{value:(U=o(t))==null?void 0:U.details,class:"textarea textarea-bordered",disabled:""},null,8,os)])):p("",!0)])]),s("div",ls,[o(i)?p("",!0):(l(),r("button",rs,e[7]||(e[7]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z"})],-1),m(" Settings ")]))),o(i)?p("",!0):(l(),r("button",as,e[8]||(e[8]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1),m(" Edit Profile ")])))])])])])])}}},cs={__name:"[[id]]",setup(_){return(a,v)=>{const d=ns;return l(),r("div",null,[S(d,{userId:(a._.provides[j]||a.$route).params.id},null,8,["userId"])])}}};export{cs as default};
